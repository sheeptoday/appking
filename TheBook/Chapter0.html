<!doctype html><!-- appart :: 8002 :: 2019.8.13 -->
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- ========================================= HEAD CONTENT -->


    <title>Король Апп. Глава 0.</title>
    <meta name="description" content="История сайта, расказанная его компонентами" />
    <meta name="author"      content="zl 2019, www.sheep.today" />


    <!-- ========================================= BOOT -->


    <style>
        /* ༼°▽°༽ style boot */
        body    { width: 100%; height: auto; overflow: hidden; }
        img,svg { max-width: 100%; }
    </style>


    <script>
        /* ༼°▽°༽ app boot */
        function BootKing() {
            let  King = this
            King.has  =  {
                 Queens: ['mutate','onload'],
                 Memory: [],
                 toRemember: (something) => King.has.Memory.push(something) }
            function KeepInMemory(responsible) {
                 return (dna) => King.has.toRemember({dna,for:responsible}) }
            King.has.Queens.map( (queen)=>King[queen]=KeepInMemory(queen) ) }

        let app = new BootKing()
    </script>


    <!-- ༼°▽°༽ prefetch boot -->
    <link rel="preconnect"   href="//fonts.gstatic.com">
    <!-- INFO: https://3perf.com/blog/link-rels/ -->


    <!-- ========================================= DESIGN -->


    <link
        href="app/styles/appart.css?v2019.8.12"
        rel="stylesheet" type="text/css">
    <link
        href="https://fonts.googleapis.com/css?family=Vollkorn:400,400i,700&subset=cyrillic"
        rel="stylesheet">


    <!-- FAVICON -->
    <!-- 2019.1, best favicon service: https://realfavicongenerator.net/ -->
    <link rel="apple-touch-icon" sizes="180x180" href="app/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="app/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="app/favicons/favicon-16x16.png">
    <link rel="manifest" href="app/favicons/site.webmanifest">
    <link rel="mask-icon" href="app/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="app/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="msapplication-config" content="app/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">


    <!-- ========================================= APP CUSTOM -->

    <link
        href="app/styles/el-chapters.css?v2019.8.13.opacity"
        rel="stylesheet" type="text/css">


    <!-- ========================================== ʕ⊙ᴥ⊙ʔ = -->
    <!-- ========================================= END HEAD -->
</head>
<body class="colors--ivory use-colors">


<!-- -------------------------------------------- Вступление барона фон Гамбургера -->

<header id="Introduction" class="el-introduction colors--swed use-colors chapter-has-bottom-divider">
    <section class="chapter">
        <figure class="character el-hamburger js-for-ChaptersBar">
            <img src="art/characters/hamburger.svg" alt="Барон фон Гамбургер">
        </figure>
    </section>
</header>


<!-- -------------------------------------------- Chapter 0. -->

<main class="book-of-chapters -x- journal-grid book-markup">

    <!-- ------------------------------------------- Знакомство -->


    <article id="TheEnd" class="book-chapter -x- layer keep-grid">

        <header class="book-chapter-header -x- wide">
            <p  class="-x- mid-title">Глава 0.</p>
            <h2 class="book-chapter-caption -x- huge-title">«Почему мы начинаем с конца?»</h2>
        </header>

        <p>Спросила девушка Константа у короля Аппа.</p>

        <p>Вдвоём, они сидели на крыше двухэтажного дома — гостиницы, на окраине небольшого посёлка.</p>

        <p>С одной стороны, гостиницу окружала каштановая роща — мать теней, как её называли местные жители. Под кронами деревьев разбросаны большие камни, — уже изрядно потрёпанные временем, и от того переполненные магией. Такой мудрёной, что каждая прогулка по каштановой роще превращалась в интересные беседы о гармонии и вечности.</p>

        <blockquote class="note" hidden>
            <q>Как мясо может разговаривать?</q>
            <q>Они издают звуки внутри себя и реагируют на звуковые сигналы собеседника.</q>
            <q>Звуки мяса?</q>
            <q>Ну да, куски шлёпаются друг об друга, между ними проходит воздух...</q>
        </blockquote>

        <section class="el-stones-meat-talks -x- layer has-bottom-divider">
            <figure>
                <img src="art/illustrations/stones-meat-talks.svg" alt="Камни обсуждают звуки мяса">
            </figure>
        </section>

        <hr>

        <div class="note">
            <p>Рис.12 Камни обсуждают возможность общения с человеком.</p>
            <p>Иллюстрация по мотивам:<br>
            Terry Bisson,
            «They're made out of meat»<br>
            <a href="https://www.proza.ru/2012/10/19/872/">proza.ru/...</a></p>
        </div>

        <hr class="the-great-divider">

        <p>По другую сторону гостиницы... удобнее перечислить списком.<br>Начиная издалека:</p>

        <ul class="block">
            <li><p>Горная гряда ломанной линией опоясывала горизонт.</p></li>

            <li><p>Черепичные крыши невысоких сельских домов устилали долину оранжевым ковром. На крышах сидела детвора, с интересом наблюдая за происходящим вокруг.</p></li>

            <li><p>Вокруг гостиницы толпились жители посёлка. Вооружённые палками и готовые в любой момент пойти на штурм королевской резиденции. Недовольный ропот собравшихся, время от времени, разряжался гневными криками в адрес короля. Если прислушаться, чтобы понять тему собрания, можно расслышать слова «оптимизация», «ужать», «уменьшить».</p></li>

            <li><p>Подробность намерений иллюстрировал плакат, со схематично нарисованной головой короля и остальной частью короля.</p></li>

            <li><p>Невысокий деревянный забор отделял гостиничный двор от собравшихся. Но, не забор удерживал толпу от решительных действий.</p></li>

            <li><p>Пол сотни овечек в бронзовых доспехах — The Battlesheeps, преданные гвардейцы короля — ровными рядами стояли за забором.</p></li>
        </ul>

        <p>От привычных овечек, гвардейцы отличались массивными доспехами поверх шерсти и теоретической возможностью, разнести всех собравшихся людей по домам, по первому приказу. Эти же овечки умели водить хороводы в мирное время или играть в волейбол на солнечных лугах. Такая вот сказочка.</p>

        <section class="-x- book-illustration wide keep-grid color-box">

            <p>По легенде, каждая овечка была раньше снежинкой. Снежинки порхали в порывах ветра над холмами. Когда ветер стихал, снежинки собирались вместе в плотный шарик, который падал на землю и скатывался по снежному склону. И чем дольше скатывался шарик, тем становился больше, и тем больше ускорял свой бег. К подножью подлетал настолько быстрый снежный ком, что запросто мог перелететь небольшую речку, если по пути попадался подходящий трамплин.</p>

            <p>Перелетев на другой берег, снежный ком с хлопком разбивался на тысячи снежинок. Те, вновь рассыпались в воздухе, порхая как и прежде, но уже совсем в другом месте.</p>

            <p>С тех давних пор, снежинки успели превратиться в овечек и потеряли возможность подниматься в воздух. Но сохранили любовь к танцам и умение собраться в слаженную команду для решения задач любой сложности.</p>

        </section>

        <p>Поэтому жители посёлка не решались на открытое столкновение. Лишь гневные крики перелетали через забор, в короля на крыше.</p>

    </article>

    <!-- -------------------------------------------------------------- -->

    <!-- Содержание -->

    <aside class="ChaptersBar offsidebar from-eastside colors-as-secondary">
        <section class="sidepanel">

            <header class="sidepanel-header">
                <h2 class="min-title">Глава 0.</h2>
            </header>

            <nav class="sidepanel-content">
                <ul class="asidebar-list js-for-ChaptersBar">
                    <li><a href="#TheEnd">Конец</a></li>
                </ul>
            </nav>

            <footer class="sidepanel-footer">
                <div><a href="index.html">Начало</a></div>
            </footer>

        </section>
    </aside>
    <button class="VonHamburgerOnDuty">
        <figure class="el-hamburger js-for-ChaptersBar">
            <img class="for-inactive" src="art/characters/hamburger.svg" alt="Барон фон Гамбургер">
            <div class="for-active svga-icon base-size"><svg><use xlink:href="#svg-close"></use></svg></div>
        </figure>
    </button>

    <!-- ActivateChaptersBar -->

    <script>
        function InterfaceOffsideBar (barName) {

            const asidebar = document.querySelector('.'+barName)
            const htmlwrap = document.querySelector('html')

            const classActive     = 'is-active'
            const classHasOverlay = 'has-offsidebar-overlay'
            const cssBartender    ='.js-for-' + barName
            const classOverlay    = 'offsidebar-overlay'
            const classBackground = 'offsidebar-background'

            const doClose  = () => {
                asidebar.classList.remove(classActive)
                htmlwrap.classList.remove(classHasOverlay) }
            const doOpen   = () => {
                asidebar.classList.add(classActive)
                htmlwrap.classList.add(classHasOverlay) }
            const doToggle = () => {
                if (asidebar.classList.contains(classActive)) doClose()
                else doOpen()
            }

            // find and activate bartenders
            const bartenderFunction = (el, order) =>
                  el.addEventListener('click', order === 'close' ? doClose : doToggle )
            document.querySelectorAll(cssBartender).forEach(bartenderFunction)

            // find/create background
            let background = asidebar.querySelector('.'+classBackground)
            if(!background) {
                background = document.createElement('div')
                background.classList.add(classBackground)
                asidebar.prepend(background)
            }

            // find/create shadow overlay with functionality
            let overlay = asidebar.querySelector('.'+classOverlay)
            if(!overlay) {
                overlay = document.createElement('div')
                overlay.classList.add(classOverlay)
                asidebar.prepend(overlay)
            }
            bartenderFunction(overlay, 'close')
        }

        // Launch Activation
        InterfaceOffsideBar('ChaptersBar')
    </script>

    <!-- Activate von Hamburger position -->

    <script>
        function vonHamburgerIsActiveWhenGoesNorth (markerName) {
            const marker    = document.querySelector('.el-introduction .el-hamburger')
            const dutyPlace = document.querySelector('.VonHamburgerOnDuty')
            const doDisplay = () => dutyPlace.classList.add('is-active')
            const doAway    = () => dutyPlace.classList.remove('is-active')

            if( !window.IntersectionObserver ) return doDisplay()

            const markerFunction = (reports) => {
                let status = reports[0]
                if (status.boundingClientRect.bottom>0) doAway()
                else doDisplay()
            }
            const markerObserver = new IntersectionObserver(markerFunction, {threshold:[0]} )
            markerObserver.observe(marker)
        }
        vonHamburgerIsActiveWhenGoesNorth()
    </script>

</body>
</html>
